<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-2625609735952352">
    <meta name="description" content="Watch Makkah Live 24/7 and listen to Holy Quran Radio from Cairo, Saudi Arabia, and famous reciters. High quality Islamic streaming for free.">
    <meta name="keywords" content="Quran Live, Makkah Live, Quran Radio Cairo, Saudi Quran Radio, Maher Al Muaiqly, Islamic Radio, Online Quran">
    <meta name="author" content="Mohamed Ibrahim">
    <title>Holy Quran Live Stream | القرآن الكريم بث مباشر</title>
    
    <!-- Google AdSense (Loaded once here) -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2625609735952352" crossorigin="anonymous"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts: Google Fonts (Amiri for Arabic, Inter for English) -->
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Icons: Lucide -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #f8fafc;
        }
        .font-arabic {
            font-family: 'Amiri', serif;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b; 
        }
        ::-webkit-scrollbar-thumb {
            background: #475569; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b; 
        }
        
        /* Audio Visualizer Animation */
        .bar {
            width: 6px;
            background: #10b981;
            border-radius: 9999px;
            animation: bounce 1.2s infinite ease-in-out;
            transition: height 0.2s ease;
        }
        .bar:nth-child(2) { animation-delay: 0.1s; height: 40px; }
        .bar:nth-child(3) { animation-delay: 0.2s; height: 50px; }
        .bar:nth-child(4) { animation-delay: 0.3s; height: 35px; }
        .bar:nth-child(5) { animation-delay: 0.4s; height: 45px; }
        
        @keyframes bounce {
            0%, 100% { transform: scaleY(0.5); opacity: 0.5; }
            50% { transform: scaleY(1.2); opacity: 1; }
        }

        .active-channel {
            background-color: #10b981; /* Emerald 500 */
            color: white;
            border-color: #10b981;
        }
        
        audio {
            width: 100%;
            height: 40px;
            border-radius: 8px;
        }

        .prose-custom h3 {
            color: #34d399; /* emerald-400 */
            font-weight: 700;
            margin-bottom: 0.5rem;
            margin-top: 1.5rem;
        }
        .prose-custom p {
            color: #cbd5e1; /* slate-300 */
            line-height: 1.75;
            margin-bottom: 1rem;
        }
        .prose-custom ul {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-bottom: 1rem;
            color: #cbd5e1;
        }
        
        /* Modal Styles */
        .modal {
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
            pointer-events: none;
        }
        .modal.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        /* Custom Play Button Overlay */
        .play-overlay {
            transition: all 0.3s ease;
        }
        .play-overlay:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navbar -->
    <nav class="bg-slate-900/90 border-b border-slate-800 backdrop-blur-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-emerald-600 rounded-full flex items-center justify-center text-white shadow-lg shadow-emerald-500/20">
                        <i data-lucide="book-open" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-white tracking-wide">QuranLive</h1>
                        <p class="text-xs text-emerald-400 font-arabic tracking-wider">القرآن الكريم بث مباشر</p>
                    </div>
                </div>
                
                <div class="flex items-center gap-2 bg-red-500/10 px-3 py-1 rounded-full border border-red-500/20">
                    <span class="relative flex h-2.5 w-2.5">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-red-500"></span>
                    </span>
                    <span class="text-xs font-semibold text-red-400 uppercase tracking-widest">Live</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 flex flex-col items-center">
        
        <!-- Google AdSense Unit (Autorelaxed) -->
        <div class="w-full max-w-4xl max-h-96 mb-8 bg-slate-800/50 rounded-lg shadow-sm border border-slate-700/50 overflow-hidden relative" style="min-height: 200px;">
            <p class="text-[10px] text-slate-600 pt-2 uppercase tracking-widest absolute top-0 left-0 w-full text-center">Advertisement</p>
            
            <div class="pt-6 px-2 w-full">
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2625609735952352"
                     crossorigin="anonymous"></script>
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-format="autorelaxed"
                     data-ad-client="ca-pub-2625609735952352"
                     data-ad-slot="3954163232"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </div>
        
        <!-- Player Container -->
        <div class="w-full max-w-4xl bg-slate-800 rounded-2xl overflow-hidden shadow-2xl shadow-black/50 border border-slate-700">
            
            <!-- Video/Audio Area -->
            <div id="player-screen" class="aspect-video w-full bg-black relative flex items-center justify-center">
                <!-- Loading Spinner -->
                <div id="loader" class="absolute inset-0 flex items-center justify-center z-0">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"></div>
                </div>

                <!-- Video Iframe -->
                <iframe 
                    id="video-player"
                    class="w-full h-full relative z-10" 
                    src="" 
                    title="Live Stream" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>

                <!-- Audio Visualization (Hidden by default) -->
                <div id="audio-visualizer" class="hidden absolute inset-0 z-20 bg-slate-900 flex-col items-center justify-center bg-[url('https://images.unsplash.com/photo-1597843702131-4876258d4a93?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center">
                    <div class="absolute inset-0 bg-black/70 backdrop-blur-sm"></div>
                    <div class="relative z-10 text-center px-4 w-full max-w-lg">
                        <div class="w-24 h-24 bg-emerald-600/20 rounded-full flex items-center justify-center mx-auto mb-6 border-2 border-emerald-500/50">
                            <i data-lucide="radio" class="w-10 h-10 text-emerald-400"></i>
                        </div>
                        <h2 id="audio-title" class="text-2xl font-bold text-white mb-2 font-arabic">Quran Radio</h2>
                        <p id="audio-subtitle" class="text-slate-300 mb-8">Live Audio Stream</p>
                        
                        <!-- Visualizer Bars (Animated when playing) -->
                        <div id="bars-container" class="flex items-end justify-center gap-1 h-12 mb-8 opacity-50">
                            <div class="bar h-8"></div>
                            <div class="bar h-12"></div>
                            <div class="bar h-6"></div>
                            <div class="bar h-10"></div>
                            <div class="bar h-7"></div>
                            <div class="bar h-11"></div>
                            <div class="bar h-5"></div>
                        </div>

                        <!-- Manual Play Button Overlay (For iOS/Mobile stability) -->
                        <button id="manual-play-btn" onclick="toggleAudio()" class="play-overlay w-16 h-16 bg-emerald-500 rounded-full flex items-center justify-center text-white shadow-xl hover:bg-emerald-400 mb-6 mx-auto">
                            <i id="play-icon" data-lucide="play" class="w-8 h-8 fill-current ml-1"></i>
                        </button>
                        
                        <p id="status-text" class="text-xs text-slate-400 mt-2 opacity-70">
                            Tap to Play
                        </p>

                        <!-- Native Audio Element (Hidden mostly, but controls accessible) -->
                        <!-- Removed crossorigin="anonymous" to fix CORS issues on some streams -->
                        <audio id="audio-player" class="hidden">
                            Your browser does not support the audio element.
                        </audio>
                    </div>
                </div>
            </div>

            <!-- Controls / Info -->
            <div class="p-6 bg-slate-800">
                <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                    <div>
                        <h2 id="current-channel-name" class="text-xl font-bold text-white flex items-center gap-2">
                            <i data-lucide="tv" class="w-5 h-5 text-emerald-500"></i>
                            Makkah Live
                        </h2>
                        <p class="text-slate-400 text-sm mt-1">Official Broadcast</p>
                    </div>
                    
                    <div class="flex gap-2">
                        <!-- Direct Link Button (Fallback) -->
                        <a id="external-link" href="#" target="_blank" class="flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors text-sm font-medium border border-slate-600">
                            <i data-lucide="external-link" class="w-4 h-4"></i>
                            <span>Watch on YouTube</span>
                        </a>
                        
                        <button onclick="shareLink()" class="flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors text-sm font-medium shadow-lg shadow-emerald-600/20">
                            <i data-lucide="share-2" class="w-4 h-4"></i>
                            <span>Share</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Channel Selector -->
        <div class="w-full max-w-4xl mt-8">
            <h3 class="text-slate-400 text-sm font-semibold uppercase tracking-wider mb-4 flex items-center gap-2">
                <i data-lucide="list" class="w-4 h-4"></i> Select Channel / اختر القناة
            </h3>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                
                <!-- Channel 1: Makkah Video -->
                <button onclick="switchChannel('makkah')" id="btn-makkah" class="channel-btn active-channel p-4 rounded-xl border border-slate-700 bg-slate-800 hover:border-emerald-500 transition-all text-left group">
                    <div class="flex items-start justify-between mb-2">
                        <i data-lucide="video" class="w-5 h-5 group-hover:text-emerald-400 transition-colors"></i>
                        <span class="text-xs font-bold px-2 py-0.5 rounded bg-black/30 text-emerald-400">HD Live</span>
                    </div>
                    <div class="font-bold text-lg mb-1">Makkah Live</div>
                    <div class="font-arabic text-sm opacity-70">الحرم المكي مباشر</div>
                </button>

                <!-- Channel 2: Cairo Radio -->
                <button onclick="switchChannel('radio_cairo')" id="btn-radio_cairo" class="channel-btn p-4 rounded-xl border border-slate-700 bg-slate-800 hover:border-emerald-500 transition-all text-left group text-slate-300 hover:text-white">
                    <div class="flex items-start justify-between mb-2">
                        <i data-lucide="radio" class="w-5 h-5 group-hover:text-emerald-400 transition-colors"></i>
                        <span class="text-xs font-bold px-2 py-0.5 rounded bg-black/30 text-blue-400">Cairo FM</span>
                    </div>
                    <div class="font-bold text-lg mb-1">Quran Cairo</div>
                    <div class="font-arabic text-sm opacity-70">إذاعة القرآن - القاهرة</div>
                </button>

                <!-- Channel 3: Saudi Radio -->
                <button onclick="switchChannel('radio_saudi')" id="btn-radio_saudi" class="channel-btn p-4 rounded-xl border border-slate-700 bg-slate-800 hover:border-emerald-500 transition-all text-left group text-slate-300 hover:text-white">
                    <div class="flex items-start justify-between mb-2">
                        <i data-lucide="radio" class="w-5 h-5 group-hover:text-emerald-400 transition-colors"></i>
                        <span class="text-xs font-bold px-2 py-0.5 rounded bg-black/30 text-blue-400">Saudi FM</span>
                    </div>
                    <div class="font-bold text-lg mb-1">Saudi Quran</div>
                    <div class="font-arabic text-sm opacity-70">إذاعة القرآن - السعودية</div>
                </button>

                <!-- Channel 4: Specific Reciter -->
                <button onclick="switchChannel('radio_maher')" id="btn-radio_maher" class="channel-btn p-4 rounded-xl border border-slate-700 bg-slate-800 hover:border-emerald-500 transition-all text-left group text-slate-300 hover:text-white">
                    <div class="flex items-start justify-between mb-2">
                        <i data-lucide="mic" class="w-5 h-5 group-hover:text-emerald-400 transition-colors"></i>
                        <span class="text-xs font-bold px-2 py-0.5 rounded bg-black/30 text-blue-400">Reciter</span>
                    </div>
                    <div class="font-bold text-lg mb-1">Maher Al Muaiqly</div>
                    <div class="font-arabic text-sm opacity-70">ماهر المعيقلي</div>
                </button>

            </div>
        </div>

        <!-- Quote -->
        <div class="mt-12 mb-12 text-center max-w-2xl px-4">
            <blockquote class="text-xl font-arabic leading-loose text-emerald-100 mb-4">
                "وَرَتِّلِ الْقُرْآنَ تَرْتِيلًا"
            </blockquote>
            <p class="text-slate-400 text-sm">
                "And recite the Qur'an with measured recitation." (Surah Al-Muzzammil, 73:4)
            </p>
        </div>

        <!-- NEW CONTENT SECTION (For SEO & AdSense Value) -->
        <section class="w-full max-w-4xl bg-slate-800/50 rounded-2xl p-8 border border-slate-700 mt-4 prose-custom">
            
            <div class="grid md:grid-cols-2 gap-8">
                <!-- English Content -->
                <div>
                    <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                        <i data-lucide="book-open-check" class="text-emerald-500"></i>
                        Beneficial Knowledge
                    </h2>
                    
                    <article>
                        <h3>Virtues of Listening to the Quran</h3>
                        <p>
                            Listening to the Holy Quran is an act of worship that brings immense tranquility to the heart. Allah (SWT) says in the Quran: "So when the Qur'an is recited, then listen to it and pay attention that you may receive mercy." (Al-A'raf, 7:204). It serves as a spiritual healing, a reminder of our purpose, and a direct connection to the Creator.
                        </p>
                    </article>

                    <article>
                        <h3>About Our Radio Stations</h3>
                        <p>
                            <strong>Quran Radio Cairo (98.2 FM):</strong> Established in 1964, it is one of the oldest and most prestigious Quran radio stations in the world. It broadcasts from Cairo, Egypt, featuring legendary reciters like Mahmoud Khalil Al-Hussary, Abdul Basit Abdul Samad, and Mustafa Ismail. It is known for its rigorous verification of recitations and diverse Islamic programming.
                        </p>
                        <p>
                            <strong>Saudi Quran Radio:</strong> Broadcasts directly from Saudi Arabia, offering high-quality recitations 24/7. It frequently features the Imams of the Two Holy Mosques, providing listeners with a direct spiritual link to the lands of revelation.
                        </p>
                    </article>

                    <article>
                        <h3>Etiquette of Listening</h3>
                        <ul>
                            <li><strong>Silence & Attention:</strong> Listen attentively and avoid distractions.</li>
                            <li><strong>Reflection (Tadabbur):</strong> Try to understand the meaning of the verses being recited.</li>
                            <li><strong>Cleanliness:</strong> While not mandatory for listening (unlike touching the Mushaf), being in a state of Wudu enhances the spiritual experience.</li>
                        </ul>
                    </article>
                </div>

                <!-- Arabic Content -->
                <div class="text-right" dir="rtl">
                    <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2 justify-end font-arabic">
                        فوائد وموارد قيمة
                        <i data-lucide="star" class="text-emerald-500"></i>
                    </h2>

                    <article>
                        <h3 class="font-arabic text-xl">فضل الاستماع للقرآن الكريم</h3>
                        <p class="font-arabic text-lg">
                            الاستماع إلى القرآن الكريم عبادة عظيمة تجلب السكينة والطمأنينة للقلب. قال الله تعالى: ﴿وَإِذَا قُرِئَ الْقُرْآنُ فَاسْتَمِعُوا لَهُ وَأَنصِتُوا لَعَلَّكُمْ تُرْحَمُونَ﴾. الاستماع بتدبر يفتح أبواب الرحمة الإلهية ويزيد الإيمان في القلب، وهو شفاء لما في الصدور.
                        </p>
                    </article>

                    <article>
                        <h3 class="font-arabic text-xl">نبذة عن الإذاعات المتوفرة</h3>
                        <p class="font-arabic text-lg">
                            <strong>إذاعة القرآن الكريم من القاهرة:</strong> تأسست عام 1964، وتعد من أعرق الإذاعات الإسلامية في العالم. تتميز ببث تلاوات نادرة لكبار القراء مثل الشيخ عبد الباسط عبد الصمد، والشيخ المنشاوي، والشيخ الحصري. تعتبر مرجعاً موثوقاً للتلاوة الصحيحة والأحكام الشرعية.
                        </p>
                        <p class="font-arabic text-lg">
                            <strong>إذاعة القرآن الكريم من السعودية:</strong> تبث من مهبط الوحي، وتقدم تلاوات عطرة على مدار الساعة، مع تركيز خاص على تلاوات أئمة الحرمين الشريفين، مما يربط المستمع روحانياً بالأجواء الإيمانية في مكة المكرمة والمدينة المنورة.
                        </p>
                    </article>

                    <article>
                        <h3 class="font-arabic text-xl">آداب الاستماع</h3>
                        <ul class="font-arabic text-lg list-disc list-inside">
                            <li><strong>الإنصات والتدبر:</strong> استحضار القلب وفهم معاني الآيات.</li>
                            <li><strong>الخشوع:</strong> التأثر بالآيات والبكاء من خشية الله عند آيات الوعيد والرحمة.</li>
                            <li><strong>احترام كلام الله:</strong> عدم الانشغال باللغو أو الحديث الجانبي أثناء التلاوة.</li>
                        </ul>
                    </article>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="border-t border-slate-800 bg-slate-900 py-8 mt-8">
        <div class="container mx-auto px-4 text-center">
            <div class="flex justify-center gap-4 text-xs text-slate-400 mb-4">
                <button onclick="openModal('privacy')" class="hover:text-emerald-400 underline">Privacy Policy</button>
                <button onclick="openModal('terms')" class="hover:text-emerald-400 underline">Terms of Use</button>
                <button onclick="openModal('contact')" class="hover:text-emerald-400 underline">Contact</button>
            </div>
            <p class="text-slate-500 text-sm">
                &copy; <script>document.write(new Date().getFullYear())</script> Holy Quran Live. 
                <br>Sources: Official Saudi TV & MP3Quran.net.
                <br><span class="text-emerald-500/60 mt-2 block">Designed by Mohamed Ibrahim</span>
            </p>
        </div>
    </footer>

    <!-- Cookie Consent Banner -->
    <div id="cookie-banner" class="fixed bottom-0 left-0 w-full bg-slate-900 border-t border-slate-700 p-4 z-50 hidden">
        <div class="container mx-auto max-w-7xl flex flex-col sm:flex-row items-center justify-between gap-4">
            <p class="text-slate-300 text-sm text-center sm:text-left">
                We use cookies to improve your experience and show personalized ads. By using this site, you agree to our <button onclick="openModal('privacy')" class="text-emerald-400 underline">Privacy Policy</button>.
            </p>
            <button onclick="acceptCookies()" class="bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg">
                Accept
            </button>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="modal-contact" class="modal fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeModal('contact')"></div>
        <div class="bg-slate-800 rounded-xl p-8 max-w-md w-full relative z-10 border border-slate-700 text-center">
            <button onclick="closeModal('contact')" class="absolute top-4 right-4 text-slate-400 hover:text-white">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <h2 class="text-2xl font-bold text-white mb-6">Contact Us</h2>
            
            <div class="space-y-3">
                <a href="tel:+96566805723" class="flex items-center justify-center gap-3 p-3 rounded-lg bg-slate-700/50 hover:bg-slate-700 transition-colors text-slate-200 group">
                    <i data-lucide="phone" class="w-5 h-5 text-emerald-400 group-hover:text-emerald-300"></i>
                    <span class="font-medium" dir="ltr">+965 66805723</span>
                </a>
                
                <a href="mailto:Mohamed.ibrahimx1199@gmail.com" class="flex items-center justify-center gap-3 p-3 rounded-lg bg-slate-700/50 hover:bg-slate-700 transition-colors text-slate-200 group">
                    <i data-lucide="mail" class="w-5 h-5 text-emerald-400 group-hover:text-emerald-300"></i>
                    <span class="font-medium text-sm break-all">Mohamed.ibrahimx1199@gmail.com</span>
                </a>
                
                <a href="https://www.linkedin.com/in/mohamed-ibrahim-3928ba1b9" target="_blank" class="flex items-center justify-center gap-3 p-3 rounded-lg bg-slate-700/50 hover:bg-slate-700 transition-colors text-slate-200 group">
                    <i data-lucide="linkedin" class="w-5 h-5 text-emerald-400 group-hover:text-emerald-300"></i>
                    <span class="font-medium">LinkedIn Profile</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div id="modal-privacy" class="modal fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeModal('privacy')"></div>
        <div class="bg-slate-800 rounded-xl p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto relative z-10 border border-slate-700">
            <button onclick="closeModal('privacy')" class="absolute top-4 right-4 text-slate-400 hover:text-white">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <h2 class="text-2xl font-bold text-white mb-4">Privacy Policy</h2>
            <div class="prose-custom text-sm">
                <p><strong>1. Introduction</strong><br>Welcome to Holy Quran Live. We respect your privacy.</p>
                <p><strong>2. Cookies & Advertising</strong><br>We use Google AdSense to serve ads. Google may use cookies to personalize ads based on your visits to this and other websites. You can opt out of personalized advertising by visiting Google's Ad Settings.</p>
                <p><strong>3. Data Collection</strong><br>We do not collect personal data directly. We use standard web analytics to improve performance.</p>
                <p><strong>4. Third-Party Links</strong><br>Our site contains streams from third parties (YouTube, RadioJar). We are not responsible for their content or privacy practices.</p>
            </div>
        </div>
    </div>

    <!-- Terms Modal -->
    <div id="modal-terms" class="modal fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeModal('terms')"></div>
        <div class="bg-slate-800 rounded-xl p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto relative z-10 border border-slate-700">
            <button onclick="closeModal('terms')" class="absolute top-4 right-4 text-slate-400 hover:text-white">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <h2 class="text-2xl font-bold text-white mb-4">Terms of Use</h2>
            <div class="prose-custom text-sm">
                <p><strong>1. Usage</strong><br>This website is for personal, non-commercial spiritual use.</p>
                <p><strong>2. Content</strong><br>All video and audio streams are copyright of their respective owners (Saudi Broadcasting Authority, ERTU Egypt). We simply provide an interface to access these public streams.</p>
                <p><strong>3. Disclaimer</strong><br>We strive for high uptime but cannot guarantee the availability of third-party streams.</p>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // Cookie Consent Logic
        if (!localStorage.getItem('cookiesAccepted')) {
            document.getElementById('cookie-banner').classList.remove('hidden');
        }

        function acceptCookies() {
            localStorage.setItem('cookiesAccepted', 'true');
            document.getElementById('cookie-banner').classList.add('hidden');
        }

        // Modal Logic
        function openModal(id) {
            document.getElementById(`modal-${id}`).classList.add('active');
        }

        function closeModal(id) {
            document.getElementById(`modal-${id}`).classList.remove('active');
        }

        // UPDATED STREAMS for Stability (Windows/Android/iOS)
        const channels = {
            makkah: {
                type: 'video',
                src: 'https://www.youtube.com/embed/live_stream?channel=UCos52azQNBgW63_9uDJoPDA', 
                external: 'https://www.youtube.com/channel/UCos52azQNBgW63_9uDJoPDA/live',
                name: 'Makkah Live',
                arabic: 'الحرم المكي مباشر'
            },
            radio_cairo: {
                type: 'audio',
                // Primary: Zeno FM (Secure & Reliable for Mobile)
                src: 'https://stream.zeno.fm/4x4f43v52hhvv', 
                name: 'Quran Radio Cairo',
                arabic: 'إذاعة القرآن الكريم - القاهرة'
            },
            radio_saudi: {
                type: 'audio',
                // Primary: Backup Qurango (Standard MP3)
                src: 'https://backup.qurango.net/radio/saudi', 
                name: 'Saudi Quran Radio',
                arabic: 'إذاعة القرآن الكريم - السعودية'
            },
            radio_maher: {
                type: 'audio',
                src: 'https://qurango.net/radio/maher', 
                backup: 'https://backup.qurango.net/radio/maher',
                name: 'Maher Al Muaiqly',
                arabic: 'الشيخ ماهر المعيقلي'
            }
        };

        const videoPlayer = document.getElementById('video-player');
        const audioPlayer = document.getElementById('audio-player');
        const audioVisualizer = document.getElementById('audio-visualizer');
        const currentChannelName = document.getElementById('current-channel-name');
        const audioTitle = document.getElementById('audio-title');
        const audioSubtitle = document.getElementById('audio-subtitle');
        const externalLink = document.getElementById('external-link');
        const manualPlayBtn = document.getElementById('manual-play-btn');
        const playIcon = document.getElementById('play-icon');
        const barsContainer = document.getElementById('bars-container');
        const statusText = document.getElementById('status-text');

        let currentChannelId = 'makkah';
        let isPlaying = false;

        // Error Handling for Audio
        audioPlayer.addEventListener('error', function(e) {
            console.log("Stream Error, checking backup...", e);
            const channel = channels[currentChannelId];
            
            if (channel && channel.backup && audioPlayer.src !== channel.backup) {
                statusText.innerText = "Switching to Backup Stream...";
                audioPlayer.src = channel.backup;
                audioPlayer.load();
                audioPlayer.play().then(() => {
                    updatePlayState(true);
                }).catch(err => {
                    console.log("Backup play failed", err);
                    updatePlayState(false);
                });
            } else {
                statusText.innerText = "Connecting... (Tap Play)";
                updatePlayState(false);
            }
        });

        // Update UI based on Play State
        function updatePlayState(playing) {
            isPlaying = playing;
            if (playing) {
                // Show Pause Icon
                playIcon.setAttribute('data-lucide', 'pause'); 
                manualPlayBtn.innerHTML = `<i data-lucide="pause" class="w-8 h-8 fill-current ml-0.5"></i>`;
                barsContainer.classList.remove('opacity-50');
                barsContainer.querySelectorAll('.bar').forEach(b => b.style.animationPlayState = 'running');
                statusText.innerText = "Now Playing";
            } else {
                // Show Play Icon
                manualPlayBtn.innerHTML = `<i data-lucide="play" class="w-8 h-8 fill-current ml-1"></i>`;
                barsContainer.classList.add('opacity-50');
                barsContainer.querySelectorAll('.bar').forEach(b => b.style.animationPlayState = 'paused');
            }
            lucide.createIcons();
        }
        
        // Manual Toggle
        function toggleAudio() {
            if (audioPlayer.paused) {
                audioPlayer.play().then(() => updatePlayState(true)).catch(e => {
                    console.log("Play failed", e);
                    statusText.innerText = "Tap to Play";
                });
            } else {
                audioPlayer.pause();
                updatePlayState(false);
                statusText.innerText = "Paused";
            }
        }

        function switchChannel(channelId) {
            const channel = channels[channelId];
            if (!channel) return;

            // UI Updates
            document.querySelectorAll('.channel-btn').forEach(btn => {
                btn.classList.remove('active-channel', 'text-white');
                btn.classList.add('text-slate-300');
            });
            const activeBtn = document.getElementById(`btn-${channelId}`);
            if(activeBtn) {
                activeBtn.classList.add('active-channel');
                activeBtn.classList.remove('text-slate-300');
            }

            currentChannelName.innerHTML = `
                <i data-lucide="${channel.type === 'video' ? 'tv' : 'radio'}" class="w-5 h-5 text-emerald-500"></i>
                ${channel.name}
            `;
            
            // External Link Update
            if (channel.type === 'video') {
                externalLink.href = channel.external;
                externalLink.innerHTML = `<i data-lucide="external-link" class="w-4 h-4"></i> Watch on YouTube`;
                externalLink.classList.remove('hidden');
            } else {
                externalLink.classList.add('hidden');
            }
            
            lucide.createIcons();
            currentChannelId = channelId;

            if (channel.type === 'video') {
                // Stop Audio
                audioPlayer.pause();
                audioPlayer.src = ""; 
                audioPlayer.load(); // Release resource
                updatePlayState(false);
                
                audioVisualizer.classList.add('hidden');
                videoPlayer.classList.remove('hidden');
                videoPlayer.src = channel.src + "&autoplay=1&mute=0"; 
                
            } else {
                // Stop Video
                videoPlayer.src = "";
                videoPlayer.classList.add('hidden');
                
                // Show Audio UI
                audioVisualizer.classList.remove('hidden');
                audioVisualizer.classList.add('flex');
                
                audioTitle.innerText = channel.arabic;
                audioSubtitle.innerText = channel.name;
                statusText.innerText = "Connecting...";
                
                // Audio Logic
                audioPlayer.pause();
                audioPlayer.src = channel.src;
                audioPlayer.load();
                
                // Attempt Auto-Play
                const playPromise = audioPlayer.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        updatePlayState(true);
                    }).catch(error => {
                        console.log("Auto-play prevented. User needs to tap play.");
                        updatePlayState(false);
                        statusText.innerText = "Tap Play Button";
                    });
                }
            }
        }

        // Default Load
        window.addEventListener('DOMContentLoaded', () => {
            switchChannel('makkah');
        });

        function shareLink() {
            if (navigator.share) {
                navigator.share({
                    title: 'Holy Quran Live',
                    text: 'Live Quran Stream & Radio',
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(window.location.href);
                alert('Link copied!');
            }
        }
    </script>
</body>
</html>